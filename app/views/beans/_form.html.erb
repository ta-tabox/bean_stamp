<div class="form-container">
  <div class="form">

    <%= form_with(model: @bean) do |f| %>
    <%= render "shared/error_messages", resource: f.object %>
    <h1 class="text-center"><%= yield(:form_title) %></h1>

    <div class="field">
      <div class="flex">
        <% if @bean.bean_images.any? %>
        <% @bean.bean_images.each do |bean_image| %>
        <%= image_tag bean_image.image.thumb.url, class: "thumbnail" if bean_image.image? %>
        <% end %>
        <% end %>
      </div>
    </div>

    <div id="preview"></div>

    <%= f.fields_for @upload_image do |i|%>
    <div class="field">
      <%= i.label :image, class: "label" %>
      <%= i.file_field :image, multiple: true, accept:"image/*", class: "input-field", id: 'input-image', name: "bean_images[image][]" %>
    </div>
    <% end %>

    <div class="field">
      <%= f.label :name, class: "label" %>
      <%= f.text_field :name, autofocus: true, placeholder: "タイトル", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :country, class: "label" %>
      <%= f.text_field :country, placeholder: "生産国", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :roaste_level_id, class: "label" %>
      <div class="select-field relative">
        <%= f.collection_select :roaste_level_id, MstRoasteLevel.all, :id, :name, { prompt: true }, class: "select-box" %>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
            <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" /></svg>
        </div>
      </div>
    </div>

    <div class="field">
      <%= f.label :subregion, class: "label" %>
      <%= f.text_field :subregion, placeholder: "地域", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :farm, class: "label" %>
      <%= f.text_field :farm, placeholder: "農園", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :variety, class: "label" %>
      <%= f.text_field :variety, placeholder: "品種", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :elevation, class: "label" %>
      <%= f.number_field :elevation, placeholder: "標高", maxlength:"4", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :process, class: "label" %>
      <%= f.text_field :process, placeholder: "精製方法", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :cropped_at, class: "label" %>
      <%= f.month_field :cropped_at, placeholder: "収穫期", class: "input-field" %>
    </div>

    <div class="field">
      <%= f.label :describe, class: "label" %>
      <%= f.text_area :describe, class: "input-field" %>
    </div>

    <p>風味の評価</p>
    <div class="class">
      <%= f.label :acidity, class: "label" %>
      <%= f.range_field :acidity, min: "1", max: "5" %>
    </div>

    <div class="class">
      <%= f.label :flavor, class: "label" %>
      <%= f.range_field :flavor, min: "1", max: "5" %>
    </div>

    <div class="class">
      <%= f.label :body, class: "label" %>
      <%= f.range_field :body, min: "1", max: "5" %>
    </div>

    <div class="class">
      <%= f.label :bitterness, class: "label" %>
      <%= f.range_field :bitterness, min: "1", max: "5" %>
    </div>

    <div class="class">
      <%= f.label :sweetness, class: "label" %>
      <%= f.range_field :sweetness, min: "1", max: "5" %>
    </div>

    <div class="flex">
      <%= link_to "一覧に戻る", beans_path , class: "mr-4 btn-primary", data: { confirm: '入力中のデータは削除されます。キャンセルしますか？'} %>
      <div class="actions">
        <%= f.submit yield(:button_text), class: "btn-primary" %>
      </div>
    </div>

    <div>
      <% if @bean.id? %>
      <p>コーヒー豆を
        <%= link_to '削除する', bean_path(@bean), data: { confirm: "本当に削除しますか？"}, method: :delete , class: "link mt-4"%>
      </p>
      <% end %>
    </div>
    <% end %>
  </div>
</div>
